## **IP 프로토콜**
**역할**

* 지정한 IP 주소에 데이터 전달

* 패킷(출발지, 목적지 IP, 데이터 등을 담음)이라는 통신 단위로 데이터 전달

* 동작 방식 : 인터넷 망에 IP 패킷을 던져 노드끼리 서로 던져서 통신

**한계**

* 비연결성 : 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송

* 비신뢰성 : 중간에 패킷이 사라지거나 패킷이 순서대로 안올 수 있음
    * 보통 1500 byte가 넘으면 나눠서 보냄

* 프로그램 구분 : 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면 구분에 대한 한계가 있음


## **TCP, UDP**

IP의 문제점 (비연결성, 비신뢰성)을 해결하기 위해 TCP가 등장

### **TCP**

TCP/IP 패킷 정보 : 출발지 목적지 PORT, 전송 제어, 순서, 검증 정보안에 전송 데이터

**특징**

* 연결지향 - TCP 3 way handshake (가상 연결)

* 데이터 전달 보증 -> 데이터 누락 시 내가 알 수 있음

* 순서 보장

* 신뢰할 수 있는 프로토콜

* 현재는 대부분 TCP 사용

**동작 과정**

1. 클라 -> 서버로 SYN이라는 요청 보냄
2. 서버에서 SYN + ACK를 알았다는 요청 수락하고 연결해달라고 보냄
3. 클라에서 ACK으로 요청 수락 후 데이터 전송

만약 서버가 처음에 꺼져있으면 SYN 메시지를 보내면 응답이 없음 문제가 있다고 판단해 연결이 안됨

TCP 3 Way handshake 물리적으로 연결된 것이 아닌 가상 연결, 클라 -> 서버로 통하는 수많은 서버들이 있을텐데 이 노드들은 연결이 되어 있는지 모름 클라 서버만 논리적으로 연결이 된 것

데이터 전달 보증 : 클라 -> 서버로 데이터 전송 서버 -> 클라로 데이터 받았다고 응답 보냄 만약 아무 응답 없으면 문제가 생겼음을 인지할 수 있음

순서 보장 : 예를 들어 패킷1, 2, 3 순서로 전송 했을 때 서버에 1, 3, 2로 도착하면 다시 보내라는 메시지를 클라이언트에게 보냄

데이터 전달 보증, 순서 보장은 TCP/IP 패킷에 **전송 제어, 순서, 검증 정보**가 포함되어 있어서 가능

### **UDP**

UDP는 IP와 거의 비슷하지만 체크섬 + PORT 추가

* 체크섬 : 메시지에 대해서 제대로 맞는지에 대한 검증 역할

* PORT : 하나의 애플리케이션에서 음악 게임을 한다고 했을 때 이를 구분할 수 있음

* TCP는 3 way로 UDP보다 시간이 오래 걸림 -> http 3의 경우 UDP를 사용하면서 최근에 각광받는 중

### **PORT**

* 게임, 화상통화, 웹 브라우저 요청을 동시에 한다면 클라이언트 PC가 여러 개의 서버와 통신해야함

* 패킷들이 날라올텐데 어디에서온 패킷인지 알 수 없다 -> IP의 한계

* TCP/IP 패킷에 출발, 목적지 PORT가 있음

* 게임, 화상통화, 웹 브라우저 각각 포트가 다름
  * ex) 게임 : 200.200.200.2 IP의 8090 포트로 전송 화상통화 200.200.200.2 IP의 21000 포트

* IP는 아파트 포트는 몇동 몇호

### DNS

* IP는 기억하기 어려움, 변경 가능성이 있음 → DNS 도메인 네임 시스템

* 도메인 명을 IP로 변환

* 도메인 google.com, IP 200.200.200.2

* 클라이언트에서 도메인으로 요청하면 DNS 서버가 IP를 클라이언트에게 응답 그 다음 서버에 IP로 요청해서 접속할 수 있음