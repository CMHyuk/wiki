## 네트워크 계층

### 데이터 링크 계층의 한계

- 데이터 & 물리 계층에서 언급한 네트워크 범위는 일반적으로 LAN으로 한정
- LAN을 넘어 다른 네트워크와의 통신을 위한 네트워크 계층
    - IP 주소를 통한 송수신지 대상을 지정
    - 라우팅을 통한 다른 네트워크와 통신
- 물리 & 데이터 링크 계층만으로는 LAN을 넘어서 통신하기 어려움
    - 다른 네트워크까지의 도달 경로를 파악하기 어려움
        - 라우팅 - 패킷이 이동할 최적의 경로를 결정하는 것
        - 라우터 - 라우팅을 수행하는 대표적인 장비
    - MAC 주소만으로는 모든 네트워크에 속한 모든 호스트의 위치를 특정하기 어려움
        - MAC 주소와 IP 주소는 함께 사용되고, 기본적으로 IP 주소를 우선 활용

---

### 인터넷 프로토콜 (IP)

- IP의 공식적인 두 기능
    - 주소 지정
        - IP 주소(IPv4 주소)를 바탕으로 송수신 대상을 지정하는 것을 의미
        - 4바이트로 하나의 주소를 표현
        - 숫자당 8비트로 표현 : 0 ~ 255 범위 안에 있는 네 개의 10진수로 표기
        - 각 숫자는 점으로 구분
        - 점으로 구분된 8비트를 옥텟이라 함
        - ex) 192.168.1.1
- 단편화
    - 전송하고자 하는 패킷의 크기를 MTU 이하의 복수의 패킷으로 나누는 것
        - MTU(Maximum TransMission Unit)
            - 한 번에 전송 가능한 IP 패킷의 최대 크기
            - IP 패킷의 헤더도 MTU 크기의 포함
            - 일반적인 MTU 크기는 1500바이트, MTU 크기 이하로 나누어진 패킷은 수신지에 도착하면 다시 재조합

**단편화 피하기**

- 단편화, 많이 수행된느 것이 좋을까?
    - IP 단편화는 되도록 하지 않는 것이 좋음
    - 불필요한 트래픽 증가와 대역폭 낭비
    - 쪼개진 IP 패킷들을 하나로 합치는 과정에서 발생하는 부하도 성능 저하 요소
- IP 패킷을 주고받는 모든 노드가 **IP 단편화 없이 주고 받을 수 있는 최대 크기**만큼만 전송해야 함
- IP 단편화 없이 주고 받을 수 있는 최대 크기 = 경로 MTU(Path MTU)
    - 즉, 단편화를 피하는 방법은 경로 MTU만큼의 데이터를 전송하는 것
    - 경로 MTU 발견(Path MTU discovery): 경로 MTU를 구하고 해당 크기만큼만 송수신하여 IP 단편화를 회피
- 실제로도 단편화는 자주 일어나지 않음
    - 대부분 DF(Don't Fragment) 비트가 세팅되어 있음

---

### IPv4

**패킷의 핵심 필드**

- 식별자, 플래그, 단편화 오프셋, TTL, 프로토콜, 송신지 수신지 IP 주소

**식별자**

- 패킷에 할당된 번호
- 쪼개져서 도착한 IPv4 패킷들이 어떤 메시지에서 쪼개졌는지를 알기 위해 사용

**플래그: 세 개의 비트로 구성**

- 첫 번째 비트는 항상 0: 현재 사용되지 않음
- DF 비트(Don't Fragment) - IP 단편화를 수행하지 말라는 표시
    - 1이라면: "IP 단편화 수행하지 말라"
    - 0이라면: "IP 단편화 가능하다"
- MF 비트(More Fragment) - 단편화된 패킷이 더 있는지를 나타냄
    - 1이라면: "쪼개진 패킷이 아직 더 있다"
    - 0이라면: "이 패킷이 마지막 패킷이다"

**단편화 오프셋**

- 초기 데이터에서 몇 번째로 떨어진 패킷인지를 나타냄
    - 단편화되어 전송되는 패킷들은 수신지에 순서대로 도착하지 않을 수 있음
    - 수신지가 패킷들을 순서대로 재조합하려면 단편화된 패킷이 초기 데이터에서 몇 번째에 해당하는 패킷인지 알아야 함

**TTL**

- 패킷의 수명
- 무의미한 패킷이 네트워크 상에 지속적으로 남아있는 것을 방지하기 위해 존재
- 패킷이 하나의 라우터를 거칠 때마다 TTL이 1씩 감소, TTL 값이 0으로 떨어진 패킷은 폐기
- 홉 - 패킷이 호스트 또는 라우터에 한 번 전달되는 것
    - 즉, TTL 필드의 값은 홉마다 1씩 감소

**프로토콜**

- 상위 계층의 프로토콜이 무엇인지를 나타내는 필드
- 예) 전송 계층의 대표적인 프로토콜인 TCP는 6번, UDP는 17번

**송신지, 수신지 IP 주소**

- IP의 공식적인 기능 두 가지 중 하나인 **주소 지정**이 여기에 해당
- 이름 그대로 송수신지의 IPv4 주소

---

### IPv6

**IPv6**

- 이론적으로 할당 가능한 IPv4 주소 개수는 약 43억개 이므로 전 세계 인구가 하나씩 IP 주소를 가지고 있어도 부족한 숫자
- IPv6는 16바이트로 주소를 표현할 수 있고, 콜론으로 구분된 8개 그룹의 16진수로 표기
- 이론적으로 할당 가능한 IPv6 주소는 2의 128승개
    - ex) 2001:0db8:85a3:0000:0000:8a2e:0370:7334

**핵심 필드**

- 다음 헤더
    - 상위 계층의 프로토콜 또는 확장 헤더를 가리키는 필드
    - 확장 헤더
        - IPv6는 기본 헤더와 더불어 확장 헤더라는 추가 헤더를 가질 수 있음
        - 확장 헤더는 기본 헤더와 페이로드 데이터 사이에 위치
        - 마치 꼬리에 꼬리를 물듯 또 다른 확장 헤더를 가질 수도 있음

- IPv6의 단편화
    - IPv6는 단편화 확장 헤더를 통해 단편화가 이루어짐
        - 단편화 확장에도 **다음 헤더** 필드가 있음
            - 예약됨과 예약 필드는 0으로 설정되어 사용되지 않음
            - **단편화 오프셋과 M 플래그, 식별자 필드**
                - 단편화 오프셋 - 전체 메시지에서 현재 단편화된 패킷의 위치
                - M 플래그는 1일 경우 더 많은 단편화된 패킷이 있음을, 0일 경우 마지막 패킷
                - 식별자는 동일한 메시지에서부터 단편화된 패킷임을 식별

---

### ARP

**ARP (Address Resolution Protocol)**

- IP 주소를 통해 MAC 주소를 알아내는 프로토콜
- 동일 네트워크 내에 있는 송수신 대상의 IP 주소를 통해 MAC 주소를 알아낼 수 있음
- ARP 동작
    1. ARP 요청
    2. ARP 응답
    3. ARP 테이블 갱신

**MAC 주소를 알아내는 과정**

- 동일 네트워크에 속한 호스트 A, B
- 호스트 A는 호스트 B의 IP주소는 알지만 MAC 주소는 모름

1. ARP 요청
    - 호스트 A: 브로드캐스트 메시지 전송
    - 이 브로드캐스트 메시지 = ARP 요청이라는 ARP 패킷
2. ARP 응답
    - 호스트 B 외에 나머지 호스트는 자신의 IP 주소가 아니므로 무시
    - 호스트 B: 자신의 MAC 주소를 담은 유니캐스트 메시지를 A에게 전송
    - 이 유니캐스트 메시지 = ARP 응답이라는 ARP 패킷
        - 이 메시지를 수신한 A는 B의 MAC 주소를 알게 됨

3. ARP 테이블 갱신
    - ARP 테이블: ARP 요청-응답을 통해 알게 된 IP 주소와 MAC 주소의 연관 관계
        - ARP 테이블 항목은 일정 시간이 지나면 삭제, 임의 삭제도 가능
        - ARP 테이블에 등록된 호스트에 대해선 ARP 요청을 보낼 필요 없음

**ARP 패킷?**

- ARP 요청, 응답 과정에서 송수신되는 패킷
- 오퍼레이션 코드 - ARP 요청의 경우 1, ARP 응답의 경우 2
- 송신지, 수신지 하드웨어 주소
    - MAC 주소
- 송신지, 수신지 프로토콜 주소
    - IP 주소

---

### IP 주소의 구조와 클래스풀 주소체계

- 주소 지정은 IP 주소로 이루어짐
- IP 주소의 구조: 크게 네트워크 주소와 호스트 주소로 구성
    - 네트워크 주소가 16비트, 호스트 주소가 16비트인 IP주소
        - 172.16.12.45 (10101100.00010000.00001100.00101101)
- 네트워크 주소
    - 네트워크를 표현하는 부분
    - 호스트가 속한 특정 네트워크를 식별
- 호스트 주소
    - 호스트를 표현하는 부분
    - 특정 호스트를 식별

**IP 주소에서 네트워크 주소와 호스트 주소 크기는 각각 어느 정도가 적당할까?**

- 네트워크 주소가 하나의 옥텟으로 이루어질 경우
    - 한 네트워크당 호스트 주소 할당에 24비트를 사용할 수 있음
        - 상대적으로 많은 호스트에 IP 주소를 할당
- 네트워크 주소가 세 개의 옥텟으로 이루어질 경우
    - 한 네트워크당 호스트 주소 할당에 8비트 사용할 수 있음
        - 상대적으로 적은 호스트에 IP 주소를 할당

**IP 주소의 구조**

- 무조건 호스트 주소 공간을 크게 할당하면?
    - 호스트가 할당되지 않은 다수의 IP 주소가 낭비
- 무조건 호스트 주소 공간을 작게 할당하면?
    - 호스트가 사용할 IP 주소가 부족
- 이런 고민을 해결하기 위해 생겨난 개념 = IP 주소의 클래스

**클래스풀 주소 체계**

- 클래스
    - 네트워크 크기에 따라 IP 주소를 분류하는 기준
    - 클래스풀 주소 체계 - 클래스를 기반으로 IP 주소를 관리하는 주소 체계
    - 필요한 호스트 IP 개수에 따라 클래스를 달리 선택 - 네트워크 크기 조정 가능

- **A 클래스**
    - B와 C 클래스에 비해 할당 가능한 호스트 주소의 수가 많음
    - 네트워크 주소는 비트 0으로 시작하는 1옥텟, 호스트 주소는 3옥텟으로 구성
    - 이론상 128개의 클래스 네트워크 존재 가능
    - A 클래스로 나타낼 수 있는 IP 주소 범위
        - 최솟값을 10진수로 표현하면 0.0.0.0
        - 최댓값을 10진수로 표현하면 127.255.255.255
    - 가장 처음 옥텟의 주소가 0 ~ 127일 경우 A 클래스 주소임을 짐작할 수 있음
    - 각 네트워크에 2의24승 (16,777,216)개의 호스트 주소 할당 가능

- **B 클래스**
    - 네트워크 주소는 비트 10으로 시작하는 2옥텟, 호스트 주소도 2옥텟으로 구성
    - 이론상 2의 14승(16,384)개의 B 클래스 네트워크 존재 가능
    - 각 네트워크에 2의16승(65,534)개의 호스트 주소 할당 가능
    - B 클래스로 나타낼 수 있는 IP 주소 범위
        - 최솟값을 10진수로 표현하면 128.0.0.0
        - 최댓값을 10진수로 표현하면 191.255.255.255
    - 가장 처음 옥텟의 주소가 128 ~ 191일 경우 B 클래스 주소임을 짐작할 수 있음

- **C 클래스**
    - 네트워크 주소는 비트 110으로 시작하는 3옥텟, 호스트 주소는 1옥텟으로 구성
    - 이론상 2의 21승개의 C 클래스 네트워크 존재 가능
    - 각 네트워크에 2의8승(256)개 호스트 주소 할당 가능
    - C 클래스로 나타낼 수 있는 IP 주소 범위
        - 최솟값을 10진수로 표현하면 192.0.0.0
        - 최댓값을 10진수로 표현하면 223.255.255.255
    - 가장 처음 옥텟의 주소가 192 ~ 223일 경우 C 클래스 주소임을 짐작할 수 있음

- **호스트의 주소 공간을 모두 사용할 수 있는 것은 아님**
    - 호스트 주소가 전부 0인 IP 주소
        - 해당 네트워크 자체를 의미하는 네트워크 주소로 사용
    - 호스트 주소가 전부 1인 IP 주소
        - 브로드캐스트 주소로 사용

---

### 클래스리스 주소 체계

**클래스풀 주소 체계의 한계**

- 클래스별 네트워크 크기가 고정되어 있어 여전히 낭비되는 IP 주소가 많을 수 있다.
    - A 클래스 네트워크 하나 당 할당 가능한 호스트: 1600만개 이상
    - B 클래스 네트워크 하나 당 할당 가능한 호스트 6만개 이상

**클래스별 할당 가능한 주소의 개수 정리**

| 클래스 | 초기 비트 범위           | 네트워크/호스트 비트 | 할당 가능한 네트워크 수 | 할당 가능한 호스트 수 (네트워크당) |
|-----|--------------------|-------------|---------------|----------------------|
| A   | 0xxxxxxx (1~126)   | 8/24        | 126           | 16,777,214           |
| B   | 10xxxxxx (128~191) | 16/16       | 16,384        | 65,534               |
| C   | 110xxxxx (192~223) | 24/8        | 2,097,152     | 254                  |

**클래스리스 주소 체계**

- 클래스 개념 없이 클래스에 구애받지 않고 네트워크의 영역을 나누고 호스트에게 IP 주소 공간을 할당하는 방식
- 클래스풀 주소 체계보다 더 유동적이고 정교한 네트워크 구획 가능
- 오늘날 주로 활용되는 방식

**서브넷 마스크**

- 클래스 없이 IP 주소의 네트워크 주소, 호스트 주소를 구분하는 수단
- IP 주소상에서 네트워크 주소는 1, 호스트 주소는 0으로 표기한 비트열
    - 네트워크 내의 부분적인 네트워크(서브네트워크)를 구분 짓는 비트열
- A, B, C 클래스의 기본 서브넷 마스크
    - A 클래스: 255.0.0.0
    - B 클래스: 255.255.0.0
    - C 클래스: 255.255.255.0

**서브네팅**

- 서브넷 마스크를 이용해 클래스를 원하는 크기로 더 잘게 쪼개어 사용하는 것
- 서브넷 마스크로 주소와 호스트 주소를 구분 짓는 방법
    - IP 주소와 서브넷 마스크를 비트 AND 연산 -> 결과 = 네트워크 주소

**서브넷 마스크 표기: CIDR 표기법**

- 10진수로 직접 표기
    - 255.255.255.0, 255.255.255.252 등
- CIDR(Classless Inter-Domain Routing notation) 표기법
    - IP 주소/서브넷 마스크상의 1의 개수 형식으로 표기
        - 예) C 클래스의 기본 서브넷 마스크는 255.255.255.0
        - 이를 2진수로 표기하면 11111111.11111111.11111111.00000000 (1이 총 24개) 따라서 24

---

### 공인 IP 주소와 사설 IP 주소

**공인 IP 주소**

- 전 세계에서 고유한 IP 주소
- 네트워크 간의 통신, 이를테면 인터넷을 이용할 때 사용하는 IP 주소
- 공인 IP 주소는 ISP나 공인 IP 주소 할당 기관을 통해 할당

**사설 IP 주소**

- 사설 네트워크에서 사용하기 위한 IP 주소
- 사설 IP 주소로 사용하도록 특별히 예약된 IP 주소 공간
    - 10.0.0.0/8 (10.0.0.0 - 10.255.255.255)
    - 172.16.0.0/12 (172.16.0.0 - 172.31.255.255)
    - 192.168.0.0/16 (192.168.0.0 - 192.168.255.255)
- 사설 IP 주소의 할당 주체는 일반적으로 라우터 (공유기)

**NAT (Network Address Translation)**

- IP 주소 변환 기술: 주로 사설 IP 주소와 공인 IP 주소를 변환
- 대부분의 라우터와 (가정용) 공유기는 NAT 기능 내장
    - 사설 네트워크의 패킷 속 사설 IP 주소는 공유기를 거쳐 공인 IP 주소로 변경
    - 외부 네트워크의 패킷 속 공인 IP 주소는 공유기를 거쳐 사설 IP 주소로 변경
- NAT를 통해 사설 IP 주소를 사용하는 여러 호스트는 적은 수의 공인 IP 주소를 공유 가능

---

### 정적 IP 주소 동적 IP 주소

**정적 IP 주소 부여**

- 윈도우나 맥OS 등의 네트워크 설정에서 IP 주소를 수동으로 설정
- 일반적으로 부여하고자 하는 IP 주소, 서브넷 마스크, 게이트웨이(라우터) 주소, DNS 주소를 입력

**기본 게이트웨이**

- 게이트웨의 일반적 의미
    - 서로 다른 네트워크를 연결하는 하드웨어적/소프트웨어적 수단
- 호스트가 속한 네트워크 외부로 나가기 위한 기본적인 첫 경로(첫 번째 홉)
    - 네트워크 외부와 연결된 라우터(공유기)의 주소를 의미하는 경우가 많음
    - IP 할당의 맥락에서 사용된 '게이트웨이'라는 용어는 기본 게이트웨이(라우터(공유기)의 주소)를 의미

**모든 IP 주소를 정적으로 할당할 수 있을까?**

- 호스트의 수가 많아질 경우 관리 곤란
- 의도치 않게 잘못된 IP 주소를 입력할 수도 있고, 중복된 IP 주소를 입력할 수도 있음

**동적 할당**

- 호스트에 IP 주소를 프로토콜을 활용해 자동으로 할당하는 방식
    - IP 동적 할당에 사용되는 대표적인 프로토콜 DHCP(Dynamic Host Configuration Protocol)
- 이렇게 할당된 IP 주소를 동적 IP 주소라고 함

**DHCP를 통한 IP 주소 할당**

- 클라이언트와 DHCP 서버 간 메시지 송수신을 통해 할당이 이루어짐
- 클라이언트: IP 주소를 할당받고자 하는 호스트
- DHCP 서버: 호스트에게 IP 주소를 제공하는 호스트
    - DHCP 서버의 역할은 일반적으로 라우터가 수행
    - 특정 호스트에 DHCP 서버 기능을 추가할 수도 있음
    - DHCP 서버는 클라이언트에게 할당 가능한 IP 주소 목록을 관리하다, 클라이언트 요청시 IP 주소를 할당
- DHCP로 할당받은 동적 IP 주소는 사용할 기간(임대 기간)이 정해짐
    - 일반적으로 수 시간에서 수 일
    - 임대 기간이 끝난 IP 주소는 다시 DHCP 서버로 반납

**IP 주소 할당 과정에서 주고받는 메시지**

1. **DHCP Discover (클라이언트 -> DHCP 서버)**
    - DHCP 서버 찾는 메시지
    - 브로드캐스트로 전송
    - 클라이언트는 아직 IP 주소를 할당받지 못함: 송신지 IP 주소는 0.0.0.0으로 설정
2. **DHCP Offer (DHCP 서버 -> 클라이언트)**
    - 클라이언트에게 할당 가능한 IP 주소 정보를 제안하는 메시지
    - 할당 가능한 IP 주소, 서브넷 마스크, 임대 기간 등의 정보 포함
3. **DHCP Request (클라이언트 -> DHCP 서버)**
    - DHCP Offer 메시지에 대한 응답
    - 브로드캐스트로 전송
4. **DHCP Acknowledgment(DHCP 서버 -> 클라이언트)**
    - 최종 승인과 같은 메시지
    - DHCP ACK 메시지를 클라이언트는 이제 할당받은 IP 주소를 자신의 IP 주소로 설정 후 임대 기간 동안 IP 주소 사용
    - 사용 기간이 모두 끝나면?
        - IP 주소 DHCP 서버에 반납

---

### 127.0.0.1과 0.0.0.0

**127.0.0.1**

- 루프백 주소, 로컬 호스트
- 자기 자신을 가리키는 특별한 주소
- 루프백 주소로 전송된 패킷은 자기 자신에게 되돌아옴
    - 부메랑 역할을 수행하는 주소
    - 테스트난 디버깅 용도로 사용

**0.0.0.0/8**

- 호스트가 IP 주소를 할당받기 전에 임시로 할당되는 IP 주소
    - 예) DHCP Discover 메시지를 전송하는 시점의 클라이언트 IP 주소
- 특별히 지칭할 IP 주소가 없을 때 사용되는 IP 주소
- 호스트 입장에서 마땅히 자신을 지칭할 IP 주소가 없을 때

**0.0.0.0/0**

- 0.0.0.0/8과 유사하지만 다른 의미를 지니는 주소
- 모든 임의의 IP 주소
- 주로 라우팅에서 디폴트 라우트를 나타내기 위해 사용
    - 디폴트 라우트: 패킷을 어떤 IP 주소로 전달할지 결정하기 어려울 경우 기본적으로 패킷을 전달할 경로
    - 어디로 패킷을 전달해야 할지 명확하지 않으면 여기로 패킷을 이동시켜라

---

### 라우팅 테이블

**라우터**

- 네트워크 간 통신을 가능케 하는 네트워크 계층의 장비
    - 네트워크 간 통신 과정에서 패킷은 여러 라우터를 거쳐서 다양한 경로로 이동할 수 있음
        - 패킷은 여러 대의 라우터를 깡충깡충 거치듯 수신지까지 이동
- 라우팅 과정(홉 수) 확인
    - 윈도우 - `tracert www.google.com`
    - 리눅스나 맥OS - `traceroute www.google.com`
- 라우터의 라우팅 수행 과정
    - 학습의 주안점: 라우팅의 핵심, **라우팅 테이블**
    - 라우팅 테이블이 만들어지는 방법과 프로토콜에 따른 라우팅의 분류

**라우팅 테이블**

- 특정 수신지까지 도달하기 위한 정보를 명시한 표와 같은 정보
- 라우터는 라우팅 테이블을 참고해 수신지까지의 도달 경로를 판단
- 라우팅 테이블에 포함된 정보
    - **수신지 IP 주소와 서브넷 마스크**
        - 최종적으로 패킷을 전달할 대상
    - **다음 홉**
        - 최종 수신지까지 가기 위해 다음으로 거쳐야 할 호스트의 IP 주소나 인터페이스
    - **네트워크 인터페이스**
        - 패킷을 내보낼 통로
        - 인터페이스 이름이 직접 명시되거나 인터페이스에 대응하는 IP 주소 명시
    - **메트릭**
        - 해당 경로로 이동하는 데에 드는 비용
        - 라우팅 테이블의 여러 경로 중 메트릭이 낮은 경로를 선호

| 수신지 IP 주소 (Destination) | 서브넷 마스크 (Netmask) | 게이트웨이 (Gateway) | 인터페이스 (Interface) | 메트릭 (Metric) |
|-------------------------|-------------------|-----------------|-------------------|--------------|
| 192.168.2.0             | 255.255.255.0     | 192.168.2.1     | eth0              | 30           |
| ...                     | ...               | ...             | ...               | ...          |

- 수신지가 192.168.2.0/24(호스트 IP 주소 범위 192.168.2.1 ~ 192.168.2.254)인 패킷은 eth0(인터페이스)를 통해 192.168.2.1(게이트웨이)로 전송하라

**디폴트 라우트: 라우팅 테이블에 경로가 없을 때**

- 기본적으로 패킷을 내보낼 경로
- 모든 IP 주소를 의미 하는 0.0.0.0/0로 명시
- 수신지 IP 주소가 1.2.3.4인 패킷을 받았다면: 디폴트 라우트, eth2를 통해 192.168.0.1로 전송

| 수신지 IP 주소 (Destination) | 서브넷 마스크 (Netmask) | 게이트웨이 (Gateway) | 인터페이스 (Interface) | 메트릭 (Metric) |
|-------------------------|-------------------|-----------------|-------------------|--------------|
| 192.168.2.0             | 255.255.255.0     | 192.168.2.1     | eth0              | 30           |
| 0.0.0.0                 | 0.0.0.0           | 192.168.0.1     | eth2              | 30           |

**정적 라우팅**  
- 사용자가 수동으로 직접 채워 넣은 라우팅 테이블의 항목을 토대로 라우팅 
- 예) 10.0.0.0/24로 향하는 패킷을 192.168.1.1 게이트웨이로 정적 라우팅

**동적 라우팅**
- 네트워크의 규모가 커지고 관리해야 할 라우터가 늘어나면 정적 라우팅만으로는 관리가 힘듦 
  - 입력 실수가 발생할 수 있음 
  - 입력 실수가 없어도 라우팅 경로상에 예상치 못한 문제가 발생할 경우 경로 우회가 어려움
- 자동으로 라우팅 테이블 항목을 만들고, 이를 이용하여 라우팅 
- 라우팅 프로토콜 이용 
  - 라우터끼리 자신들의 정보를 교환하며 패킷이 이동할 최적의 경로를 찾기 위한 프로토콜
- 동적 라우팅을 하면 라우팅 테이블 항목이 수시로 변할 수 있음 
  - 라우팅 테이블의 항목을 수동으로 입력할 필요 없음 
  - 네트워크 경로상에 문제가 발생했을 때 이를 우회할 수 있게 경로가 자동으로 갱신

**라우터들의 집단 네트워크, AS (Autonomous System)**  
- 동적 라우팅과 라우팅 프로토콜을 이해하기 위한 배경 지식 
- 한 회사나 단체에서 관리하는 라우터 집단 
  - AS마다 인터넷상에서 고유한 AS 번호(ASN)가 할당 
  - AS 번호는 사설 IP 주소처럼 사설 AS 번호도 있지만, 일반적으로 'AS 번호'는 고유한 AS 번호를 지칭

**라우팅 프로토콜**  
- 라우터끼리 자신들의 정보를 교환하며 패킷이 이동할 최적의 경로를 찾기 위한 프로토콜
- 라우팅 프로토콜의 종류 
  - IGP(Interior Gateway Protocol) - AS 내부에서 수행 (e.g. RIP, OSPF)
  - EGP(Exterior Gateway Protocol) - AS 외부에서 수행 (e.g. BGP)

**대표적인 IGP: RIP와 OSPF**  
- RIP - 최적의 경로를 선정하는 과정에서 **거리 벡터**를 사용
  - '거리'는 패킷이 경유한 라우터의 수, 즉 홉의 수를 의미
  - 특정 수신지까지 도달하기 위해 '홉 수가 가장 적은 경로'를 최적의 경로라고 판단
  - 홉 수가 적을수록 라우팅 테이블상의 메트릭 값도 작아짐
  - 주기적으로 인접 라우터끼리 경로 정보 교환, 라우팅 테이블 갱신, 특정 수신지까지의 홉 수 계산
- OSPF - 최적의 경로를 선정하는 과정에서 **링크 상태**를 사용
  - 현재 네트워크 구성을 마치 지도처럼 그린 뒤, 최적의 경로를 선택 
  - 현재 네트워크의 상태(링크 정보)를 그래프의 형태로 저장 
  - 링크 상태 테이터베이스(LSDB)에 저장 
  - 라우터들의 연결 관계, 연결 비용 등 현재 네트워크의 상태를 그래프로 표현하기 위한 데이터 저장